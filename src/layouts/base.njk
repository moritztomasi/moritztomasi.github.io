<!DOCTYPE html>
<html class="h-full" lang="{{ meta.lang }}">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{{ meta.title }}</title>

        {% include "meta.njk" %}
    </head>
    <body x-data="data()" x-bind:data-theme="themeId" x-on:keydown.escape="onToggleCloseThemeSelector()" class="w-full h-full flex flex-col font-mono text-white">
        <aside x-show="isThemeSelectorOpen" class="aside w-full lg:w-auto lg:absolute lg:left-0 bg-white p-4" style="color: black">
            <figure class="absolute top-0 right-0 cursor-pointer pr-1">
                <i @click="onToggleCloseThemeSelector()" class="lg:hidden far fa-window-close fa-lg"></i>
                <i @click="onToggleCloseThemeSelector()" class="hidden lg:inline far fa-window-close"></i>
            </figure>
            <p class="text-lg mb-4">Themes</p>
            <ul class="flex flex-row flex-wrap">
                {% for theme in themes %}
                    <li @click="onToggleTheme('{{ theme.id }}')" class="text-sm underline cursor-pointer pr-6 last:pr-0">{{ theme.name }}</li>
                {% endfor %}
            </ul>
        </aside>

        <div class="px-4 lg:px-0">
            {% include "header.njk" %}

            <main class="container mx-auto max-w-2xl flex-1">
                {{ content | safe }}
            </main>

            {% include "footer.njk" %}
        </div>
    </body>
</html>

<script>
    function data() {
        return {
            themeId: localStorage.getItem('themeId') || 'dark',
            isMobileNavOpen: false,
            isThemeSelectorOpen: false,
            onToggleMobileNav: function () {
                this.isMobileNavOpen = !this.isMobileNavOpen
            },
            onToggleTheme: function (themeId) {
                this.themeId = themeId;
                localStorage.setItem('themeId', themeId);
            },
            onToggleThemeSelector: function () {
                this.isThemeSelectorOpen = !this.isThemeSelectorOpen
            },
            onToggleOpenThemeSelector: function () {
                this.isThemeSelectorOpen = true;
            },
            onToggleCloseThemeSelector: function () {
                this.isThemeSelectorOpen = false;
            }
        }
    }
</script>